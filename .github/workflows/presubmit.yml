name: Presubmit.ai

permissions:
  contents: read
  pull-requests: write
  issues: write

on:
  pull_request_target: # Handle forked repository PRs in the base repository context
    types: [opened, synchronize, reopened, ready_for_review]

jobs:
  review:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Run AI code reviewer
        uses: presubmit/ai-reviewer@latest
        env:
          LLM_PROVIDER: ai-sdk
          LLM_MODEL: gemini-1.5-flash-latest  # ✅ Updated model
          REVIEW_SUMMARY: "true"
          MAX_TOKENS: "4096"
          TEMPERATURE: "0.2"

      - name: Print completion message
        run: echo "✅ AI code review completed successfully!"
